Cocci file: rule66.cocci

------------------------------------------------------------------------------

Evolution takes place in Linux 2.6.9 and affects various files under
sound.  Also one file in drivers/usb, although this file sems to be no
longer used.

------------------------------------------------------------------------------

amd7930.failed
 * [status] spatch-ok
 * [bug] 

au88x0_pcm.failed
 * [status] fail
 * mais trop chiant a gerer: 
      -#define chip_t vortex_t
      
      -	chip_t *chip = snd_pcm_substream_chip(substream);
      +	vortex_t *chip = snd_pcm_substream_chip(substream);

cmi8330.failed
 * [status] spatch-ok
 * unrelated CE

control.failed
 * [status] fail
 * deadcode pb 


cs46xx_lib.failed
 * [status] fail
 * deadcode pb 
 * huge .failed

cs8427.failed
 * [status] spatch-ok
 * quite equivalent transformation
      -	chip = device->private_data = kcalloc(1, sizeof(*device->private_data), GFP_KERNEL);
      +	chip = device->private_data = kcalloc(1, sizeof(*chip), GFP_KERNEL);
   both are valids


mixer_oss.failed
 * [status] UNKNOWN
 * wierd, bug?
   -		mixer = kcalloc(1, sizeof(*mixer) + sizeof(snd_mixer_oss_t), GFP_KERNEL);
   +		mixer = kcalloc(2, sizeof(*mixer), GFP_KERNEL);




mtpav.failed
 * [status] fail
 * lack iso,  X = snd_magic_... which is an affectation does not match yet 
   an initialisation

opl3_oss.failed
 * [status] fail
 * deadcode pb 

pcm_native.failed
 * [status] fail
 * deadcode pb 

pcm_oss.failed
 * [status] fail
 * deadcode pb 

pdaudiocf.failed
 * [status] fail
 * deadcode pb 

sa11xx-uda1341.failed
 * [status] spatch-ok
 * [semibug]
 * [corrected_c]
 * There is a typo in the .c, the typedef name lack a x 
   (sa11x instead of sa11xx) and so sa11xx_uda1341_t is considered
   as an ident and the SP does not apply


sb_common.failed
 * [status] fail
 * C parser problem,
     bad: int snd_sbdsp_create(snd_card_t *card,
     bad: 		     unsigned long port,
     bad: 		     int irq,
     BAD:!!!!! 		     irqreturn_t (*irq_handler)(int, void *, struct pt_regs *),


seq_device.failed
 * [status] spatch-ok
 * both are valid transformation
      -	dev = kcalloc(1, sizeof(*dev) + sizeof(*dev)+argsize, GFP_KERNEL);
      +	dev = kcalloc(1, sizeof(*dev)*2 + argsize, GFP_KERNEL);


uda1341.failed
 * [status] spatch-ok
 * [bug] 

vx_core.failed
 * [status] spatch-ok
 * [bug] sizeof(chip) instead of sizeof(*chip)!

vx_entry.failed
 * [status] fail
 * deadcode pb 
